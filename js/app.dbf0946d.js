(function(){var e={1205:function(e,t,n){"use strict";e.exports=n.p+"img/F3.de8e1177.jpg"},1425:function(e,t,n){"use strict";e.exports=n.p+"img/C4.41666b39.jpg"},1966:function(e,t,n){"use strict";e.exports=n.p+"img/F4.2c635641.jpg"},3120:function(e,t,n){"use strict";e.exports=n.p+"img/C1.a53402d2.jpg"},5662:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=5662,e.exports=t},5911:function(e,t,n){"use strict";e.exports=n.p+"img/F1.d74bde1f.jpg"},6111:function(e,t,n){"use strict";e.exports=n.p+"img/C2.5b4d406d.jpg"},6812:function(e,t,n){"use strict";var o=n(5130),l=n(6768),s=n(4232);const a={class:"sidebar-header"},c={class:"sidebar-menu"},i=["onClick"],r={class:"sidebar-text"},d={class:"content-wrapper"},u={class:"page-content"};function m(e,t,n,m,g,v){const C=(0,l.g2)("MainDashboard"),p=(0,l.g2)("CycleManagement"),h=(0,l.g2)("PrintingCodeGenerator"),y=(0,l.g2)("RightPanel");return(0,l.uX)(),(0,l.CE)("div",{class:(0,s.C4)(["main-frame",{"sidebar-open":m.sidebarOpen}])},[t[7]||(t[7]=(0,l.Lk)("div",{class:"glow-effect-1"},null,-1)),t[8]||(t[8]=(0,l.Lk)("div",{class:"glow-effect-2"},null,-1)),t[9]||(t[9]=(0,l.Lk)("div",{class:"title"},"HBNU_DED M250 Scan Pattern",-1)),(0,l.bo)((0,l.Lk)("div",{class:"slash-button",onClick:t[0]||(t[0]=e=>m.addToBottomPanel("/"))},"/",512),[[o.aG,1===m.currentPage&&m.selectedItems.length>0]]),(0,l.Lk)("div",{class:(0,s.C4)(["hamburger-menu",{hidden:m.sidebarOpen}]),onClick:t[1]||(t[1]=(...e)=>m.toggleSidebar&&m.toggleSidebar(...e))},t[3]||(t[3]=[(0,l.Lk)("div",{class:"hamburger-line"},null,-1),(0,l.Lk)("div",{class:"hamburger-line"},null,-1),(0,l.Lk)("div",{class:"hamburger-line"},null,-1)]),2),(0,l.Lk)("div",{class:(0,s.C4)(["sidebar",{"sidebar-open":m.sidebarOpen}])},[(0,l.Lk)("div",a,[t[4]||(t[4]=(0,l.Lk)("div",{class:"logo-section"},[(0,l.Lk)("div",{class:"logo"},"3DP"),(0,l.Lk)("div",{class:"logo-subtitle"},"Scan Pattern")],-1)),(0,l.Lk)("button",{class:"sidebar-close",onClick:t[2]||(t[2]=(...e)=>m.toggleSidebar&&m.toggleSidebar(...e))},"×")]),(0,l.Lk)("div",c,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(m.menuItems,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t+1,class:(0,s.C4)(["sidebar-item",{active:m.currentPage===t+1}]),onClick:e=>m.switchPage(t+1)},[(0,l.Lk)("div",{class:(0,s.C4)(["sidebar-icon",e.icon])},null,2),(0,l.Lk)("span",r,(0,s.v_)(e.text),1)],10,i))),128))]),t[5]||(t[5]=(0,l.Lk)("div",{class:"sidebar-footer"},[(0,l.Lk)("div",{class:"footer-info"},[(0,l.Lk)("div",{class:"version"},"v1.0.0"),(0,l.Lk)("div",{class:"copyright"},"© 2025 HBNU")])],-1))],2),(0,l.Lk)("div",d,[(0,l.bo)((0,l.bF)(C,{"selected-items":m.selectedItems,"custom-button-lists":m.customButtonLists,"button-images":m.buttonImages,onAddItem:m.addToBottomPanel,onRemoveItem:m.removeFromBottomPanel,onAddButton:m.handleAddButton,onClearAllItems:m.clearAllItems,onDeleteButtons:m.handleDeleteButtons,onShowButtonCode:m.handleShowButtonCode},null,8,["selected-items","custom-button-lists","button-images","onAddItem","onRemoveItem","onAddButton","onClearAllItems","onDeleteButtons","onShowButtonCode"]),[[o.aG,1===m.currentPage]]),(0,l.bo)((0,l.bF)(p,{"saved-cycles":m.savedCycles,"is-loading":m.isLoading,error:m.error,onShowCycle:m.handleShowCycle,onDeleteCycle:m.handleDeleteCycle,onUpdateCycle:m.handleUpdateCycle,onRetryLoad:m.handleRetryLoad},null,8,["saved-cycles","is-loading","error","onShowCycle","onDeleteCycle","onUpdateCycle","onRetryLoad"]),[[o.aG,2===m.currentPage]]),(0,l.bo)((0,l.bF)(h,{"saved-cycles":m.savedCycles,"button-codes":m.buttonCodes,"generated-code":m.textAreaContent,onGenerateCode:m.handleGenerateCode},null,8,["saved-cycles","button-codes","generated-code","onGenerateCode"]),[[o.aG,3===m.currentPage]]),(0,l.bo)((0,l.Lk)("div",u,t[6]||(t[6]=[(0,l.Lk)("div",{class:"code-assignment-container"},[(0,l.Lk)("div",{class:"code-assignment-title"},"페이지 4"),(0,l.Lk)("div",{style:{color:"#2D3E8F","text-align":"center","margin-top":"100px"}},"준비 중...")],-1)]),512),[[o.aG,4===m.currentPage]]),(0,l.bF)(y,{content:m.textAreaContent,title:m.rightPanelTitle,placeholder:m.textAreaPlaceholder,"show-save-cycle":1===m.currentPage,"show-save-code":!1,readonly:1===m.currentPage,"onUpdate:content":m.updateContent,onSaveCycle:m.handleSaveCycle,onSaveCode:m.handleSaveCode,onClear:m.clearContent},null,8,["content","title","placeholder","show-save-cycle","readonly","onUpdate:content","onSaveCycle","onSaveCode","onClear"])])],2)}n(4114),n(8111),n(7588),n(1701);const g={class:"page-content"},v={class:"content-grid"},C={class:"button-section"},p={class:"section-header"},h={class:"header-buttons"},y={class:"button-scroll-container"},f={class:"grid-row"},X=["data-item","onClick"],G={class:"grid-item-label"},k={class:"grid-item-image",style:{position:"relative"}},b=["src","alt"],Z={key:1,class:"default-button-icon",style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",background:"#f0f0f0","border-radius":"8px",position:"absolute",top:"0",left:"0"}},Y={style:{"font-size":"24px",color:"#666"}},L=["data-item","onClick"],w={class:"grid-item-label"},I={class:"grid-item-image",style:{position:"relative"}},S=["src","alt"],F={key:1,class:"default-button-icon",style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",background:"#f0f0f0","border-radius":"8px",position:"absolute",top:"0",left:"0"}},x={style:{"font-size":"24px",color:"#666"}},M={class:"button-section"},B={class:"section-header"},E={class:"header-buttons"},P={class:"button-scroll-container"},O={class:"grid-row"},_=["data-item","onClick"],D={class:"grid-item-label"},$={class:"grid-item-image",style:{position:"relative"}},A=["src","alt"],N={key:1,class:"default-button-icon",style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",background:"#f0f0f0","border-radius":"8px",position:"absolute",top:"0",left:"0"}},T={style:{"font-size":"24px",color:"#666"}},j=["data-item","onClick"],U={class:"grid-item-label"},J={class:"grid-item-image",style:{position:"relative"}},R=["src","alt"],K={key:1,class:"default-button-icon",style:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center",background:"#f0f0f0","border-radius":"8px",position:"absolute",top:"0",left:"0"}},W={style:{"font-size":"24px",color:"#666"}},V={class:"section-title"},Q={class:"button-scroll-container"},z={class:"grid-row"},q=["data-item","onClick"],H={class:"grid-item-label"},ee={class:"bottom-panel",id:"bottomPanel"},te={key:0,class:"bottom-panel-header"},ne={class:"bottom-panel-content"},oe=["onClick"],le={class:"modal-header"},se={class:"modal-body"},ae={class:"add-button-section"},ce={class:"add-button-input"},ie=["placeholder"],re={class:"button-code-section"},de={class:"button-image-section"},ue={class:"image-upload-area"},me=["src"],ge={key:1,class:"upload-placeholder"},ve={class:"modal-actions"},Ce={class:"modal-header"},pe={class:"modal-body"},he={class:"button-list-section"},ye={class:"button-controls"},fe={class:"button-list"},Xe=["onClick"],Ge=["checked","onClick"],ke={key:0,class:"no-buttons-message"};function be(e,t,n,a,c,i){return(0,l.uX)(),(0,l.CE)("div",g,[(0,l.Lk)("div",v,[(0,l.Lk)("div",C,[(0,l.Lk)("div",p,[t[18]||(t[18]=(0,l.Lk)("div",{class:"section-title"},"C 버튼 목록",-1)),(0,l.Lk)("div",h,[(0,l.Lk)("button",{class:"add-button-btn-small",onClick:t[0]||(t[0]=e=>i.showAddModalForList("C"))},"+"),(0,l.Lk)("button",{class:"trash-button-small",onClick:t[1]||(t[1]=e=>i.showDeleteModalForList("C"))},"🗑️")])]),(0,l.Lk)("div",y,[(0,l.Lk)("div",f,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(["C1","C2","C3","C4"],e=>(0,l.Lk)("div",{key:e,class:"grid-item","data-item":e,onClick:t=>i.addToBottomPanel(e)},[(0,l.Lk)("div",G,(0,s.v_)(e),1),(0,l.Lk)("div",k,[i.hasButtonImage(e)?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.getButtonImage(e),alt:e,style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"8px",position:"absolute",top:"0",left:"0"}},null,8,b)):((0,l.uX)(),(0,l.CE)("div",Z,[(0,l.Lk)("span",Y,(0,s.v_)(e),1)]))])],8,X)),64)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.customButtonLists.C||[],e=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"grid-item","data-item":e,onClick:t=>i.addToBottomPanel(e)},[(0,l.Lk)("div",w,(0,s.v_)(e),1),(0,l.Lk)("div",I,[i.hasButtonImage(e)?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.getButtonImage(e),alt:e,style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"8px",position:"absolute",top:"0",left:"0"}},null,8,S)):((0,l.uX)(),(0,l.CE)("div",F,[(0,l.Lk)("span",x,(0,s.v_)(e),1)]))])],8,L))),128))])])]),(0,l.Lk)("div",M,[(0,l.Lk)("div",B,[t[19]||(t[19]=(0,l.Lk)("div",{class:"section-title"},"F 버튼 목록",-1)),(0,l.Lk)("div",E,[(0,l.Lk)("button",{class:"add-button-btn-small",onClick:t[2]||(t[2]=e=>i.showAddModalForList("F"))},"+"),(0,l.Lk)("button",{class:"trash-button-small",onClick:t[3]||(t[3]=e=>i.showDeleteModalForList("F"))},"🗑️")])]),(0,l.Lk)("div",P,[(0,l.Lk)("div",O,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(["F1","F2","F3","F4"],e=>(0,l.Lk)("div",{key:e,class:"grid-item","data-item":e,onClick:t=>i.addToBottomPanel(e)},[(0,l.Lk)("div",D,(0,s.v_)(e),1),(0,l.Lk)("div",$,[i.hasButtonImage(e)?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.getButtonImage(e),alt:e,style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"8px",position:"absolute",top:"0",left:"0"}},null,8,A)):((0,l.uX)(),(0,l.CE)("div",N,[(0,l.Lk)("span",T,(0,s.v_)(e),1)]))])],8,_)),64)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.customButtonLists.F||[],e=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"grid-item","data-item":e,onClick:t=>i.addToBottomPanel(e)},[(0,l.Lk)("div",U,(0,s.v_)(e),1),(0,l.Lk)("div",J,[i.hasButtonImage(e)?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i.getButtonImage(e),alt:e,style:{width:"100%",height:"100%","object-fit":"cover","border-radius":"8px",position:"absolute",top:"0",left:"0"}},null,8,R)):((0,l.uX)(),(0,l.CE)("div",K,[(0,l.Lk)("span",W,(0,s.v_)(e),1)]))])],8,j))),128))])])]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.otherCustomLists,(e,n)=>((0,l.uX)(),(0,l.CE)("div",{key:n,class:"button-section"},[(0,l.Lk)("div",V,(0,s.v_)(n)+" 버튼 목록",1),(0,l.Lk)("div",Q,[(0,l.Lk)("div",z,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e,e=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:"grid-item","data-item":e,onClick:t=>i.addToBottomPanel(e)},[(0,l.Lk)("div",H,(0,s.v_)(e),1),t[20]||(t[20]=(0,l.Lk)("div",{class:"grid-item-image"},null,-1))],8,q))),128))])])]))),128))]),(0,l.Lk)("div",ee,[n.selectedItems.length>0?((0,l.uX)(),(0,l.CE)("div",te,[(0,l.Lk)("button",{class:"clear-all-button",onClick:t[4]||(t[4]=(...e)=>i.clearAllItems&&i.clearAllItems(...e))},"전체 삭제")])):(0,l.Q3)("",!0),(0,l.Lk)("div",ne,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.selectedItems,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"bottom-item",onClick:t=>i.removeFromBottomPanel(e.id)},(0,s.v_)(e.name),9,oe))),128))])]),c.showAddModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:t[13]||(t[13]=e=>c.showAddModal=!1)},[(0,l.Lk)("div",{class:"modal-content",onClick:t[12]||(t[12]=(0,o.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",le,[(0,l.Lk)("h3",null,(0,s.v_)(c.currentList)+" 버튼 추가",1),(0,l.Lk)("button",{class:"modal-close",onClick:t[5]||(t[5]=e=>c.showAddModal=!1)},"×")]),(0,l.Lk)("div",se,[(0,l.Lk)("div",ae,[t[24]||(t[24]=(0,l.Lk)("div",{class:"section-title"},"새 버튼 추가",-1)),(0,l.Lk)("div",ce,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>c.newButtonName=e),type:"text",placeholder:`버튼 이름 (예: ${c.currentList}5, ${c.currentList}6...)`,maxlength:"10"},null,8,ie),[[o.Jo,c.newButtonName]])]),(0,l.Lk)("div",re,[t[21]||(t[21]=(0,l.Lk)("div",{class:"section-title"},"버튼 코드 (선택사항)",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>c.newButtonCode=e),placeholder:"버튼에 할당할 코드를 입력하세요...",rows:"6",class:"code-textarea"},null,512),[[o.Jo,c.newButtonCode]])]),(0,l.Lk)("div",de,[t[23]||(t[23]=(0,l.Lk)("div",{class:"section-title"},"버튼 이미지 (선택사항)",-1)),(0,l.Lk)("div",ue,[(0,l.Lk)("input",{ref:"imageInput",type:"file",accept:"image/*",onChange:t[8]||(t[8]=(...e)=>i.handleImageUpload&&i.handleImageUpload(...e)),style:{display:"none"}},null,544),(0,l.Lk)("div",{class:"image-preview",onClick:t[9]||(t[9]=t=>e.$refs.imageInput.click())},[c.imagePreview?((0,l.uX)(),(0,l.CE)("img",{key:0,src:c.imagePreview,alt:"미리보기",class:"preview-image"},null,8,me)):((0,l.uX)(),(0,l.CE)("div",ge,t[22]||(t[22]=[(0,l.Lk)("span",null,"이미지 업로드",-1),(0,l.Lk)("small",null,"클릭하여 이미지 선택",-1)])))]),c.imagePreview?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t[10]||(t[10]=(...e)=>i.removeImage&&i.removeImage(...e)),class:"remove-image-btn"},"이미지 제거")):(0,l.Q3)("",!0)])]),(0,l.Lk)("div",ve,[(0,l.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>i.addButton&&i.addButton(...e)),class:"add-button-btn"},"버튼 추가")])])])])])):(0,l.Q3)("",!0),c.showDeleteModal?((0,l.uX)(),(0,l.CE)("div",{key:1,class:"modal-overlay",onClick:t[17]||(t[17]=e=>c.showDeleteModal=!1)},[(0,l.Lk)("div",{class:"modal-content",onClick:t[16]||(t[16]=(0,o.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",Ce,[(0,l.Lk)("h3",null,(0,s.v_)(c.currentList)+" 버튼 삭제",1),(0,l.Lk)("button",{class:"modal-close",onClick:t[14]||(t[14]=e=>c.showDeleteModal=!1)},"×")]),(0,l.Lk)("div",pe,[(0,l.Lk)("div",he,[t[25]||(t[25]=(0,l.Lk)("div",{class:"section-title"},"삭제할 버튼 선택",-1)),(0,l.Lk)("div",ye,[c.selectedForDeletion.length>0?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"delete-confirm-button",onClick:t[15]||(t[15]=(...e)=>i.deleteSelectedButtons&&i.deleteSelectedButtons(...e))}," 선택된 버튼 삭제 ("+(0,s.v_)(c.selectedForDeletion.length)+"개) ",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",fe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.deletableButtons,e=>((0,l.uX)(),(0,l.CE)("div",{key:e,class:(0,s.C4)(["button-item","delete-mode",{selected:c.selectedForDeletion.includes(e)}]),onClick:t=>i.toggleDeleteSelection(e)},[(0,l.Lk)("input",{type:"checkbox",checked:c.selectedForDeletion.includes(e),class:"delete-checkbox",onClick:(0,o.D$)(t=>i.toggleDeleteSelection(e),["stop"])},null,8,Ge),(0,l.eW)(" "+(0,s.v_)(e),1)],10,Xe))),128))]),0===i.deletableButtons.length?((0,l.uX)(),(0,l.CE)("div",ke," 삭제할 수 있는 버튼이 없습니다. ")):(0,l.Q3)("",!0)])])])])):(0,l.Q3)("",!0)])}var Ze={name:"MainDashboard",props:{selectedItems:{type:Array,default:()=>[]},customButtonLists:{type:Object,default:()=>({})},buttonImages:{type:Object,default:()=>({})}},data(){return{showAddModal:!1,showDeleteModal:!1,newButtonName:"",newButtonCode:"",currentList:"",selectedForDeletion:[],imagePreview:null,uploadedImage:null,defaultButtons:{C:["C1","C2","C3","C4"],F:["F1","F2","F3","F4"]}}},computed:{otherCustomLists(){const e={};return Object.keys(this.customButtonLists).forEach(t=>{"C"!==t&&"F"!==t&&(e[t]=this.customButtonLists[t])}),e},deletableButtons(){return this.currentList&&this.customButtonLists[this.currentList]||[]}},emits:["add-item","remove-item","add-button","clear-all-items","delete-buttons"],methods:{addToBottomPanel(e){this.$emit("add-item",e),this.$emit("show-button-code",e)},removeFromBottomPanel(e){this.$emit("remove-item",e)},clearAllItems(){confirm("모든 항목을 삭제하시겠습니까?")&&this.$emit("clear-all-items")},showAddModalForList(e){this.currentList=e,this.showAddModal=!0},showDeleteModalForList(e){this.currentList=e,this.selectedForDeletion=[],this.showDeleteModal=!0},addButton(){const e=this.currentList,t=this.newButtonName.trim().toUpperCase();t?this.defaultButtons[e]&&this.defaultButtons[e].includes(t)?alert(`"${t}"은 기본 버튼 이름입니다. 다른 이름을 사용해주세요.`):this.customButtonLists[e]&&this.customButtonLists[e].includes(t)?alert(`"${t}"은 이미 존재하는 버튼입니다. 다른 이름을 사용해주세요.`):(this.$emit("add-button",{selectedList:e,buttonName:t,buttonCode:this.newButtonCode.trim(),buttonImage:this.uploadedImage}),this.newButtonName="",this.newButtonCode="",this.imagePreview=null,this.uploadedImage=null,this.currentList="",this.showAddModal=!1,alert(`버튼 "${t}"이 목록 "${e}"에 추가되었습니다.`)):alert("버튼 이름을 입력해주세요.")},toggleDeleteSelection(e){const t=this.selectedForDeletion.indexOf(e);t>-1?this.selectedForDeletion.splice(t,1):this.selectedForDeletion.push(e)},deleteSelectedButtons(){0!==this.selectedForDeletion.length?confirm(`선택된 ${this.selectedForDeletion.length}개의 버튼을 삭제하시겠습니까?`)&&(this.$emit("delete-buttons",{listType:this.currentList,buttons:this.selectedForDeletion}),this.selectedForDeletion=[],this.showDeleteModal=!1):alert("삭제할 버튼을 선택해주세요.")},hasButtonImage(e){const t=["C1","C2","C3","C4","F1","F2","F3","F4"];return t.includes(e)||this.buttonImages[e]},getButtonImage(e){if(this.buttonImages[e])return this.buttonImages[e];try{return n(7535)(`./${e}.jpg`)}catch(t){return null}},handleImageUpload(e){const t=e.target.files[0];if(t){if(t.size>5242880)return void alert("이미지 파일 크기는 5MB 이하여야 합니다.");if(!t.type.startsWith("image/"))return void alert("이미지 파일만 업로드 가능합니다.");this.uploadedImage=t;const e=new FileReader;e.onload=e=>{this.imagePreview=e.target.result},e.readAsDataURL(t)}},removeImage(){this.imagePreview=null,this.uploadedImage=null,this.$refs.imageInput&&(this.$refs.imageInput.value="")}}},Ye=n(1241);const Le=(0,Ye.A)(Ze,[["render",be],["__scopeId","data-v-939368fc"]]);var we=Le;const Ie={class:"page-content"},Se={class:"code-assignment-container"},Fe={key:0,class:"loading-container"},xe={key:1,class:"error-container"},Me={class:"error-text"},Be={key:2,class:"cycle-list-container"},Ee={key:0,class:"empty-cycle-message"},Pe={key:1,class:"cycle-list"},Oe=["onClick"],_e={class:"cycle-header"},De={class:"cycle-name"},$e={key:0},Ae={class:"cycle-date"},Ne={class:"cycle-actions"},Te=["onClick"],je=["onClick"],Ue={class:"modal-header"},Je={class:"modal-body"},Re={class:"form-group"},Ke={class:"form-group"},We={class:"modal-footer"},Ve=["disabled"];function Qe(e,t,n,a,c,i){return(0,l.uX)(),(0,l.CE)("div",Ie,[(0,l.Lk)("div",Se,[t[10]||(t[10]=(0,l.Lk)("div",{class:"code-assignment-title"},"사이클 관리",-1)),n.isLoading?((0,l.uX)(),(0,l.CE)("div",Fe,t[8]||(t[8]=[(0,l.Lk)("div",{class:"loading-spinner"},null,-1),(0,l.Lk)("div",{class:"loading-text"},"사이클을 불러오는 중...",-1)]))):n.error?((0,l.uX)(),(0,l.CE)("div",xe,[t[9]||(t[9]=(0,l.Lk)("div",{class:"error-icon"},"⚠️",-1)),(0,l.Lk)("div",Me,(0,s.v_)(n.error),1),(0,l.Lk)("button",{class:"retry-btn",onClick:t[0]||(t[0]=(...e)=>i.retryLoad&&i.retryLoad(...e))},"다시 시도")])):((0,l.uX)(),(0,l.CE)("div",Be,[0===n.savedCycles.length?((0,l.uX)(),(0,l.CE)("div",Ee," 저장된 사이클이 없습니다. ")):((0,l.uX)(),(0,l.CE)("div",Pe,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.savedCycles,(e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"cycle-item",onClick:t=>i.showCycleContent(e)},[(0,l.Lk)("div",_e,[(0,l.Lk)("div",De,[(0,l.eW)((0,s.v_)(e.name)+" ",1),e.selectedItems&&e.selectedItems.length>0?((0,l.uX)(),(0,l.CE)("span",$e," ("+(0,s.v_)(e.selectedItems.map(e=>e.name).join(" "))+") ",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Ae,(0,s.v_)(e.date),1),(0,l.Lk)("div",Ne,[(0,l.Lk)("button",{class:"cycle-edit-btn",onClick:(0,o.D$)(t=>i.editCycle(e),["stop"]),title:"사이클 수정"}," ✏️ ",8,Te),(0,l.Lk)("button",{class:"cycle-delete-btn",onClick:(0,o.D$)(e=>i.deleteCycle(t),["stop"]),title:"사이클 삭제"}," 삭제 ",8,je)])])],8,Oe))),128))]))]))]),c.showEditModal?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"modal-overlay",onClick:t[7]||(t[7]=(...e)=>i.closeEditModal&&i.closeEditModal(...e))},[(0,l.Lk)("div",{class:"modal-content",onClick:t[6]||(t[6]=(0,o.D$)(()=>{},["stop"]))},[(0,l.Lk)("div",Ue,[t[11]||(t[11]=(0,l.Lk)("h3",null,"사이클 수정",-1)),(0,l.Lk)("button",{class:"modal-close",onClick:t[1]||(t[1]=(...e)=>i.closeEditModal&&i.closeEditModal(...e))},"×")]),(0,l.Lk)("div",Je,[(0,l.Lk)("div",Re,[t[12]||(t[12]=(0,l.Lk)("label",null,"사이클 이름:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>c.editingCycle.name=e),type:"text",class:"form-input",placeholder:"사이클 이름을 입력하세요"},null,512),[[o.Jo,c.editingCycle.name]])]),(0,l.Lk)("div",Ke,[t[13]||(t[13]=(0,l.Lk)("label",null,"NC 코드:",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>c.editingCycle.content=e),class:"form-textarea",placeholder:"NC 코드를 입력하세요",rows:"8"},null,512),[[o.Jo,c.editingCycle.content]])])]),(0,l.Lk)("div",We,[(0,l.Lk)("button",{class:"btn btn-secondary",onClick:t[4]||(t[4]=(...e)=>i.closeEditModal&&i.closeEditModal(...e))},"취소"),(0,l.Lk)("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>i.saveEdit&&i.saveEdit(...e)),disabled:c.isSaving},(0,s.v_)(c.isSaving?"저장 중...":"저장"),9,Ve)])])])):(0,l.Q3)("",!0)])}var ze={name:"CycleManagement",props:{savedCycles:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["show-cycle","delete-cycle","update-cycle","retry-load"],data(){return{showEditModal:!1,editingCycle:{id:null,name:"",content:"",selectedItems:[]},isSaving:!1}},mounted(){console.log("CycleManagement 컴포넌트 마운트됨, savedCycles:",this.savedCycles)},updated(){console.log("CycleManagement 컴포넌트 업데이트됨, savedCycles:",this.savedCycles)},methods:{showCycleContent(e){console.log("사이클 클릭됨:",e),this.$emit("show-cycle",e)},deleteCycle(e){confirm(`사이클 "${this.savedCycles[e].name}"을 삭제하시겠습니까?`)&&this.$emit("delete-cycle",e)},editCycle(e){this.editingCycle={id:e.id,name:e.name,content:e.content,selectedItems:e.selectedItems||[]},this.showEditModal=!0},closeEditModal(){this.showEditModal=!1,this.editingCycle={id:null,name:"",content:"",selectedItems:[]}},saveEdit(){this.editingCycle.name.trim()?this.editingCycle.content.trim()?(this.isSaving=!0,this.$emit("update-cycle",this.editingCycle.id,this.editingCycle),this.closeEditModal(),this.isSaving=!1):alert("NC 코드를 입력해주세요."):alert("사이클 이름을 입력해주세요.")},retryLoad(){this.$emit("retry-load")}}};const qe=(0,Ye.A)(ze,[["render",Qe],["__scopeId","data-v-4916a9bb"]]);var He=qe;const et={class:"page-content"},tt={class:"code-assignment-container"},nt={class:"printing-settings-section"},ot={class:"settings-group"},lt={class:"setting-item"},st={class:"setting-item"},at={class:"setting-item"},ct={class:"setting-item"},it={class:"feeder-selection"},rt={class:"feeder-options"},dt=["value"],ut={class:"feeder-label"},mt={class:"cycle-selection-section"},gt={class:"cycle-dropdown"},vt=["value"],Ct={key:0},pt={key:0,class:"cycle-info"},ht={class:"generate-section"},yt=["disabled"];function ft(e,t,n,a,c,i){return(0,l.uX)(),(0,l.CE)("div",et,[(0,l.Lk)("div",tt,[t[17]||(t[17]=(0,l.Lk)("div",{class:"code-assignment-title"},"3D 프린팅 코드 생성",-1)),(0,l.Lk)("div",nt,[(0,l.Lk)("div",ot,[(0,l.Lk)("div",lt,[t[8]||(t[8]=(0,l.Lk)("label",{for:"layerThickness"},"Layer (mm)",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.printingSettings.layerThickness=e),type:"number",step:"0.001",min:"0.001",max:"10",placeholder:"0.250"},null,512),[[o.Jo,c.printingSettings.layerThickness]])]),(0,l.Lk)("div",st,[t[9]||(t[9]=(0,l.Lk)("label",{for:"dwellTime"},"Dwell Time (ms)",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.printingSettings.dwellTime=e),type:"number",step:"100",min:"0",max:"10000",placeholder:"3500"},null,512),[[o.Jo,c.printingSettings.dwellTime]])]),(0,l.Lk)("div",at,[t[10]||(t[10]=(0,l.Lk)("label",{for:"target"},"Target (mm)",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>c.printingSettings.target=e),type:"number",step:"0.1",min:"0",max:"1000",placeholder:"5.0"},null,512),[[o.Jo,c.printingSettings.target]])]),(0,l.Lk)("div",ct,[t[11]||(t[11]=(0,l.Lk)("label",{for:"scanSpeed"},"Scan Speed",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>c.printingSettings.scanSpeed=e),type:"number",step:"1",min:"1",max:"10000",placeholder:"850"},null,512),[[o.Jo,c.printingSettings.scanSpeed]])])]),(0,l.Lk)("div",it,[t[12]||(t[12]=(0,l.Lk)("div",{class:"setting-title"},"Feeder 선택",-1)),t[13]||(t[13]=(0,l.Lk)("div",{class:"feeder-info"},[(0,l.Lk)("p",{class:"feeder-description"},"피더 선택에 따라 NC 코드의 M60/M70, M61/M71, M62/M72 코드가 변경됩니다.")],-1)),(0,l.Lk)("div",rt,[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)(3,e=>(0,l.Lk)("label",{key:e,class:"feeder-option"},[(0,l.bo)((0,l.Lk)("input",{type:"radio",value:e,"onUpdate:modelValue":t[4]||(t[4]=e=>c.printingSettings.selectedFeeder=e)},null,8,dt),[[o.XL,c.printingSettings.selectedFeeder]]),(0,l.Lk)("span",ut,"피더"+(0,s.v_)(e)+" (M"+(0,s.v_)(59+e)+"/M"+(0,s.v_)(69+e)+")",1)])),64))])])]),(0,l.Lk)("div",mt,[t[16]||(t[16]=(0,l.Lk)("div",{class:"section-title"},"사이클 선택",-1)),(0,l.Lk)("div",gt,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>c.selectedCycleIndex=e)},[t[14]||(t[14]=(0,l.Lk)("option",{value:""},"사이클을 선택하세요",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.savedCycles,(e,t)=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:t},[(0,l.eW)((0,s.v_)(e.name)+" ",1),e.selectedItems&&e.selectedItems.length>0?((0,l.uX)(),(0,l.CE)("span",Ct," ("+(0,s.v_)(e.selectedItems.map(e=>e.name).join(" "))+") ",1)):(0,l.Q3)("",!0)],8,vt))),128))],512),[[o.u1,c.selectedCycleIndex]])]),""===c.selectedCycleIndex?((0,l.uX)(),(0,l.CE)("div",pt,t[15]||(t[15]=[(0,l.Lk)("p",null,"사이클을 선택하면 해당 사이클의 버튼들을 기반으로 NC 코드를 생성합니다.",-1),(0,l.Lk)("p",null,"프로그램 헤더 - [레이어 변경] - [선택된 사이클 버튼들] - 프로그램 푸터 구조로 생성됩니다.",-1)]))):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ht,[(0,l.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.generateCode&&i.generateCode(...e)),class:"generate-button"}," 코드 파일 생성 "),(0,l.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.downloadAsText&&i.downloadAsText(...e)),class:"download-button",disabled:!n.generatedCode}," 텍스트 파일로 저장 ",8,yt)])])])}n(2489),n(4603),n(7566),n(8721);var Xt={name:"PrintingCodeGenerator",props:{savedCycles:{type:Array,default:()=>[]},buttonCodes:{type:Object,default:()=>({})},generatedCode:{type:String,default:""}},emits:["generate-code"],data(){return{printingSettings:{layerThickness:.25,dwellTime:3500,target:5,scanSpeed:850,selectedFeeder:1},selectedCycleIndex:""}},methods:{removeComments(e){if(!e)return"";const t=e.split("\n"),n=t.filter(e=>{const t=e.trim();if(t.startsWith("//")||t.startsWith(";")||t.startsWith("#")||t.startsWith("/*")||t.startsWith("*")||t.startsWith("*/"))return!1;if(""===t)return!1;if(t.includes("//")||t.includes(";")){const e=Math.min(-1!==t.indexOf("//")?t.indexOf("//"):1/0,-1!==t.indexOf(";")?t.indexOf(";"):1/0);if(e!==1/0){const n=t.substring(0,e).trim();return""!==n}}return!0});return n.join("\n")},generateCode(){const{layerThickness:e,dwellTime:t,target:n,selectedFeeder:o}=this.printingSettings;if(!e||!t||!n)return void alert("Layer Thickness, Dwell Time, Target을 모두 입력해주세요.");if(""===this.selectedCycleIndex)return void alert("사이클을 선택해주세요.");const l=this.savedCycles[this.selectedCycleIndex];l?(console.log("PrintingCodeGenerator에서 피더 선택:",o),this.$emit("generate-code",{layerThickness:e,dwellTime:t,target:n,selectedFeeder:parseInt(o),selectedCycle:l,scanSpeed:this.printingSettings.scanSpeed})):alert("선택된 사이클을 찾을 수 없습니다.")},downloadAsText(){if(!this.generatedCode)return void alert("생성된 코드가 없습니다.");const e=this.removeComments(this.generatedCode);if(!e.trim())return void alert("주석을 제거한 후 저장할 코드가 없습니다.");const t=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5),n=""!==this.selectedCycleIndex?this.savedCycles[this.selectedCycleIndex]?.name:"unknown",o=`3D_printing_${n}_${t}.txt`,l=new Blob([e],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(l),a=document.createElement("a");a.href=s,a.download=o,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert(`코드가 "${o}" 파일로 저장되었습니다.\n\n주석이 제거된 깔끔한 코드만 저장되었습니다.`)}}};const Gt=(0,Ye.A)(Xt,[["render",ft],["__scopeId","data-v-171ef3d0"]]);var kt=Gt;const bt={class:"right-panel"},Zt={class:"right-panel-title"},Yt={class:"text-area-container"},Lt={class:"comment-button-container"},wt=["value","placeholder","readonly"],It={class:"button-container"};function St(e,t,n,a,c,i){return(0,l.uX)(),(0,l.CE)("div",bt,[(0,l.Lk)("div",Zt,(0,s.v_)(n.title),1),(0,l.Lk)("div",Yt,[(0,l.Lk)("div",Lt,[(0,l.Lk)("button",{class:(0,s.C4)(["comment-button",{active:c.showComments}]),onClick:t[0]||(t[0]=(...e)=>i.toggleComments&&i.toggleComments(...e))},(0,s.v_)(c.showComments?"주석 숨기기":"주석 보기"),3)]),(0,l.Lk)("textarea",{value:i.displayContent,class:"text-area",placeholder:n.placeholder,readonly:n.readonly,onInput:t[1]||(t[1]=(...e)=>i.onInput&&i.onInput(...e))},null,40,wt),(0,l.Lk)("div",It,[(0,l.bo)((0,l.Lk)("button",{class:"action-button",onClick:t[2]||(t[2]=(...e)=>i.saveCycle&&i.saveCycle(...e))}," 사이클 저장 ",512),[[o.aG,n.showSaveCycle]]),(0,l.bo)((0,l.Lk)("button",{class:"action-button",onClick:t[3]||(t[3]=(...e)=>i.saveCode&&i.saveCode(...e))}," 코드 저장 ",512),[[o.aG,n.showSaveCode]]),(0,l.Lk)("button",{class:"action-button clear-button",onClick:t[4]||(t[4]=(...e)=>i.clearText&&i.clearText(...e))}," 지우기 ")])])])}var Ft={name:"RightPanel",props:{content:{type:String,default:""},title:{type:String,default:"NC Code"},placeholder:{type:String,default:"여기에 NC 코드를 작성하세요..."},showSaveCycle:{type:Boolean,default:!1},showSaveCode:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},data(){return{showComments:!1}},computed:{displayContent(){if(!this.showComments){const e=this.content.split("\n"),t=e.filter(e=>{const t=e.trim();if(t.startsWith("//")||t.startsWith(";")||t.startsWith("#")||t.startsWith("/*")||t.startsWith("*")||t.startsWith("*/"))return!1;if(""===t)return!1;if(t.includes("//")||t.includes(";")){const e=Math.min(-1!==t.indexOf("//")?t.indexOf("//"):1/0,-1!==t.indexOf(";")?t.indexOf(";"):1/0);if(e!==1/0){const n=t.substring(0,e).trim();return""!==n}}return!0}),n=t.join("\n");return console.log("주석 필터링 결과:",{"원본_줄수":e.length,"필터링_줄수":t.length,"원본_내용":this.content,"필터링_내용":n}),n}return console.log("주석 표시 모드:",this.content),this.content}},emits:["update:content","save-cycle","save-code","clear"],methods:{onInput(e){this.$emit("update:content",e.target.value)},saveCycle(){this.$emit("save-cycle")},saveCode(){this.$emit("save-code")},clearText(){confirm("정말로 모든 텍스트를 지우시겠습니까?")&&this.$emit("clear")},toggleComments(){this.showComments=!this.showComments}}};const xt=(0,Ye.A)(Ft,[["render",St],["__scopeId","data-v-bf52ac6a"]]);var Mt=xt,Bt=n(144);function Et(){const e=(0,Bt.KR)(1),t=(0,Bt.KR)(!1),n=(0,Bt.KR)([]),o=(0,Bt.KR)([]),l=[{text:"사이클 생성",icon:"dashboard-icon"},{text:"사이클 관리",icon:"messages-icon"},{text:"코드 파일 생성",icon:"schedule-icon"}],s=e=>{try{console.log("loadAppState 실행됨");const t=localStorage.getItem("selectedItems");console.log("localStorage에서 가져온 selectedItems:",t),t?(n.value=JSON.parse(t),console.log("selectedItems 복원됨:",n.value)):console.log("저장된 selectedItems 없음"),e&&"function"===typeof e?(console.log("콜백 함수 실행"),e()):console.log("콜백 함수 없음")}catch(t){console.error("앱 상태 로드 중 오류:",t)}},a=()=>{try{localStorage.setItem("selectedItems",JSON.stringify(n.value))}catch(e){console.error("앱 상태 저장 중 오류:",e)}};return s(),{currentPage:e,sidebarOpen:t,selectedItems:n,savedCycles:o,menuItems:l,loadAppState:s,saveAppState:a}}function Pt(){const e=(0,Bt.KR)(!1),t=()=>{e.value=!e.value},n=()=>{e.value=!1},o=()=>{e.value=!0};return{sidebarOpen:e,toggleSidebar:t,closeSidebar:n,openSidebar:o}}function Ot(){const e=(0,Bt.KR)(""),t=(0,Bt.KR)("NC Code"),n=(0,Bt.KR)("여기에 NC 코드를 작성하세요..."),o=()=>{try{const t=localStorage.getItem("textAreaContent");t&&(e.value=t)}catch(t){console.error("텍스트 영역 내용 로드 중 오류:",t)}};o();const l=t=>{console.log("useTextArea updateContent 실행됨, content:",t),e.value=t;try{localStorage.setItem("textAreaContent",t),console.log("localStorage에 textAreaContent 저장됨")}catch(n){console.error("텍스트 영역 내용 저장 중 오류:",n)}},s=e=>{t.value=e},a=()=>{console.log("useTextArea clearContent 실행됨"),e.value="";try{localStorage.removeItem("textAreaContent"),console.log("localStorage에서 textAreaContent 제거됨")}catch(t){console.error("텍스트 영역 내용 제거 중 오류:",t)}},c=t=>{e.value&&""!==e.value.trim()?e.value+="\n\n"+t:e.value=t},i=t=>{switch(t){case 1:n.value="여기에 NC 코드를 작성하세요...";break;case 2:n.value="선택한 버튼에 할당할 NC 코드를 입력하세요...",e.value="";break;case 3:n.value="사이클을 선택하면 코드가 표시됩니다...",e.value="";break;case 4:n.value="3D 프린팅 코드 생성...",e.value="";break;default:n.value="NC Code",e.value=""}},r=(t,n)=>{n[t]?e.value=n[t]:e.value=`// ${t} 버튼에 할당된 코드가 없습니다.`};return{textAreaContent:e,rightPanelTitle:t,textAreaPlaceholder:n,updateContent:l,updateTitle:s,clearContent:a,appendContent:c,updateTextAreaForPage:i,showButtonCode:r}}n(116);var _t=n(6035);const Dt="https://topxqtmamfpglggzqbfi.supabase.co",$t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvcHhxdG1hbWZwZ2xnZ3pxYmZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5NjQzNzEsImV4cCI6MjA3MDU0MDM3MX0.RQxM7o-G-dxdeYx3Vl8teOEWn-5FGvjIShSyHO9rVrg";let At=null;if(Dt&&$t&&"YOUR_SUPABASE_URL"!==Dt)try{At=(0,_t.UU)(Dt,$t),console.log("Supabase 클라이언트가 성공적으로 생성되었습니다.")}catch(Vt){console.error("Supabase 클라이언트 생성 실패:",Vt),At=null}else console.warn("Supabase 환경 변수가 설정되지 않았습니다. .env 파일을 확인해주세요."),console.warn("VUE_APP_SUPABASE_URL과 VUE_APP_SUPABASE_ANON_KEY를 설정해야 합니다.");class Nt{static async getAllCycles(){try{if(!At){console.warn("Supabase가 설정되지 않아 로컬 스토리지를 사용합니다.");const e=localStorage.getItem("savedCycles");return e?JSON.parse(e):[]}const{data:e,error:t}=await At.from("cycles").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}catch(Vt){console.error("사이클 조회 오류:",Vt);try{const e=localStorage.getItem("savedCycles");return e?JSON.parse(e):[]}catch(e){return console.error("로컬 스토리지 복원 실패:",e),[]}}}static async saveCycle(e){try{if(!At){console.warn("Supabase가 설정되지 않아 로컬 스토리지를 사용합니다.");const t=JSON.parse(localStorage.getItem("savedCycles")||"[]"),n={id:Date.now(),name:e.name,content:e.content,selected_items:e.selectedItems,created_at:(new Date).toISOString()};return t.unshift(n),localStorage.setItem("savedCycles",JSON.stringify(t)),n}const{data:t,error:n}=await At.from("cycles").insert([{name:e.name,content:e.content,selected_items:e.selectedItems,created_at:(new Date).toISOString()}]).select();if(n)throw n;return t[0]}catch(Vt){console.error("사이클 저장 오류:",Vt);try{const t=JSON.parse(localStorage.getItem("savedCycles")||"[]"),n={id:Date.now(),name:e.name,content:e.content,selected_items:e.selectedItems,created_at:(new Date).toISOString()};return t.unshift(n),localStorage.setItem("savedCycles",JSON.stringify(t)),n}catch(t){throw console.error("로컬 스토리지 저장 실패:",t),new Error("사이클 저장에 실패했습니다.")}}}static async updateCycle(e,t){try{if(!At){console.warn("Supabase가 설정되지 않아 로컬 스토리지를 사용합니다.");const n=JSON.parse(localStorage.getItem("savedCycles")||"[]"),o=n.findIndex(t=>t.id===e);if(o>-1)return n[o]={...n[o],name:t.name,content:t.content,selected_items:t.selectedItems,updated_at:(new Date).toISOString()},localStorage.setItem("savedCycles",JSON.stringify(n)),n[o];throw new Error("사이클을 찾을 수 없습니다.")}const{data:n,error:o}=await At.from("cycles").update({name:t.name,content:t.content,selected_items:t.selectedItems,updated_at:(new Date).toISOString()}).eq("id",e).select();if(o)throw o;return n[0]}catch(Vt){throw console.error("사이클 수정 오류:",Vt),new Error("사이클 수정에 실패했습니다.")}}static async deleteCycle(e){try{if(!At){console.warn("Supabase가 설정되지 않아 로컬 스토리지를 사용합니다.");const t=JSON.parse(localStorage.getItem("savedCycles")||"[]"),n=t.filter(t=>t.id!==e);return localStorage.setItem("savedCycles",JSON.stringify(n)),!0}const{error:t}=await At.from("cycles").delete().eq("id",e);if(t)throw t;return!0}catch(Vt){throw console.error("사이클 삭제 오류:",Vt),new Error("사이클 삭제에 실패했습니다.")}}static async getCycleById(e){try{if(!At){console.warn("Supabase가 설정되지 않아 로컬 스토리지를 사용합니다.");const t=JSON.parse(localStorage.getItem("savedCycles")||"[]");return t.find(t=>t.id===e)}const{data:t,error:n}=await At.from("cycles").select("*").eq("id",e).single();if(n)throw n;return t}catch(Vt){throw console.error("사이클 조회 오류:",Vt),new Error("사이클을 찾을 수 없습니다.")}}}function Tt(){const e=(0,Bt.KR)([]),t=(0,Bt.KR)(!1),n=(0,Bt.KR)(null),o=async(o,l,s)=>{if(!l.trim())throw new Error("저장할 NC 코드가 없습니다.");if(!o||""===o.trim())throw new Error("사이클 이름을 입력해주세요.");try{t.value=!0,n.value=null;const a={name:o.trim(),content:l,selectedItems:[...s]};console.log("사이클 저장 중:",a);const c=await Nt.saveCycle(a),i={id:c.id,name:c.name,content:c.content,date:new Date(c.created_at||Date.now()).toLocaleString(),selectedItems:c.selected_items||c.selectedItems||[]};return e.value.unshift(i),console.log("사이클 저장 완료:",i),i}catch(a){throw n.value=a.message,console.error("사이클 저장 실패:",a),a}finally{t.value=!1}},l=async o=>{try{t.value=!0,n.value=null,await Nt.deleteCycle(o);const l=e.value.findIndex(e=>e.id===o);l>-1&&e.value.splice(l,1),console.log("사이클 삭제 완료:",o)}catch(l){throw n.value=l.message,console.error("사이클 삭제 실패:",l),l}finally{t.value=!1}},s=(e,t,n)=>{t(e.content),n(`사이클: ${e.name}`),setTimeout(()=>{n("NC Code")},3e3)},a=async(o=!1)=>{try{t.value=!0,n.value=null,console.log("Supabase에서 사이클 로드 중...",o?"(강제 새로고침)":"");const l=await Nt.getAllCycles(),s=l.map(e=>({id:e.id,name:e.name,content:e.content,date:new Date(e.created_at).toLocaleString(),selectedItems:e.selected_items||[]}));return o||JSON.stringify(s)!==JSON.stringify(e.value)?(e.value=s,console.log("사이클 목록 업데이트됨:",e.value)):console.log("사이클 목록 변경 없음, 상태 유지"),s}catch(l){throw n.value=l.message,console.error("사이클 로드 실패:",l),e.value=[],l}finally{t.value=!1}},c=async(o,l)=>{try{t.value=!0,n.value=null;const s=await Nt.updateCycle(o,l),a=e.value.findIndex(e=>e.id===o);return a>-1&&(e.value[a]={...s,date:new Date(s.updated_at||s.created_at).toLocaleString(),selectedItems:s.selected_items||[]}),console.log("사이클 수정 완료:",s),s}catch(s){throw n.value=s.message,console.error("사이클 수정 실패:",s),s}finally{t.value=!1}},i=()=>{console.log("localStorage에 사이클 백업 중:",e.value),localStorage.setItem("savedCycles",JSON.stringify(e.value)),console.log("localStorage 백업 완료")},r=()=>{const t=localStorage.getItem("savedCycles");if(console.log("localStorage에서 사이클 백업 복원:",t),t)try{const n=JSON.parse(t);e.value=n,console.log("백업에서 복원된 사이클 목록:",e.value)}catch(n){console.error("백업 복원 실패:",n)}};return{savedCycles:e,isLoading:t,error:n,saveCycle:o,deleteCycle:l,showCycleContent:s,loadCycles:a,updateCycle:c,saveCyclesToStorage:i,loadCyclesFromStorage:r}}var jt={C1:"G0 X7.500 Y0.000 Z0.000\nG4 P3500\nM54\nG1 X15.000 Y0.000 Z0.000\nG1 X15.000 Y15.000 Z0.000\nG1 X0.000 Y15.000 Z0.000\nG1 X7.500 Y0.000 Z0.000\nM55",C2:"G0 X15.000 Y7.500 Z0.000\nG4 P3500\nM54\nG1 X15.000 Y15.000 Z0.000\nG1 X0.000 Y15.000 Z0.000\nG1 X0.000 Y0.000 Z0.000\nG1 X15.000 Y0.000 Z0.000\nG1 X15.000 Y7.500 Z0.000\nM55",C3:"G0 X7.500 Y15.000 Z0.000\nG4 P3500\nM54\nG1 X0.000 Y15.000 Z0.000\nG1 X0.000 Y0.000 Z0.000\nG1 X15.000 Y0.000 Z0.000\nG1 X15.000 Y15.000 Z0.000\nG1 X7.500 Y15.000 Z0.000\nM55",C4:"G0 X0.000 Y7.500 Z0.000\nG4 P3500\nM54\nG1 X0.000 Y0.000 Z0.000\nG1 X15.000 Y0.000 Z0.000\nG1 X15.000 Y15.000 Z0.000\nG1 X0.000 Y15.000 Z0.000\nG1 X0.000 Y7.500 Z0.000\nM55",F1:"G0 X0.500 Y0.500 Z0.000\nG4 P3500\nM54\nG1 X0.500 Y14.500 Z0.000\nG1 X1.000 Y14.500 Z0.000\nG1 X1.000 Y0.500 Z0.000\nG1 X1.500 Y0.500 Z0.000\nG1 X1.500 Y14.500 Z0.000\nG1 X2.000 Y14.500 Z0.000\nG1 X2.000 Y0.500 Z0.000\nG1 X2.500 Y0.500 Z0.000\nG1 X2.500 Y14.500 Z0.000\nG1 X3.000 Y14.500 Z0.000\nG1 X3.000 Y0.500 Z0.000\nG1 X3.500 Y0.500 Z0.000\nG1 X3.500 Y14.500 Z0.000\nG1 X4.000 Y14.500 Z0.000\nG1 X4.000 Y0.500 Z0.000\nG1 X4.500 Y0.500 Z0.000\nG1 X4.500 Y14.500 Z0.000\nG1 X5.000 Y14.500 Z0.000\nG1 X5.000 Y0.500 Z0.000\nG1 X5.500 Y0.500 Z0.000\nG1 X5.500 Y14.500 Z0.000\nG1 X6.000 Y14.500 Z0.000\nG1 X6.000 Y0.500 Z0.000\nG1 X6.500 Y0.500 Z0.000\nG1 X6.500 Y14.500 Z0.000\nG1 X7.000 Y14.500 Z0.000\nG1 X7.000 Y0.500 Z0.000\nG1 X7.500 Y0.500 Z0.000\nG1 X7.500 Y14.500 Z0.000\nG1 X8.000 Y14.500 Z0.000\nG1 X8.000 Y0.500 Z0.000\nG1 X8.500 Y0.500 Z0.000\nG1 X8.500 Y14.500 Z0.000\nG1 X9.000 Y14.500 Z0.000\nG1 X9.000 Y0.500 Z0.000\nG1 X9.500 Y0.500 Z0.000\nG1 X9.500 Y14.500 Z0.000\nG1 X10.000 Y14.500 Z0.000\nG1 X10.000 Y0.500 Z0.000\nG1 X10.500 Y0.500 Z0.000\nG1 X10.500 Y14.500 Z0.000\nG1 X11.000 Y14.500 Z0.000\nG1 X11.000 Y0.500 Z0.000\nG1 X11.500 Y0.500 Z0.000\nG1 X11.500 Y14.500 Z0.000\nG1 X12.000 Y14.500 Z0.000\nG1 X12.000 Y0.500 Z0.000\nG1 X12.500 Y0.500 Z0.000\nG1 X12.500 Y14.500 Z0.000\nG1 X13.000 Y14.500 Z0.000\nG1 X13.000 Y0.500 Z0.000\nG1 X13.500 Y0.500 Z0.000\nG1 X13.500 Y14.500 Z0.000\nG1 X14.000 Y14.500 Z0.000\nG1 X14.000 Y0.500 Z0.000\nG1 X14.500 Y0.500 Z0.000\nG1 X14.500 Y14.500 Z0.000\nM55",F2:"G0 X14.500 Y0.500 Z0.000\nG4 P3500\nM54\nG1 X0.500 Y0.500 Z0.000\nG1 X0.500 Y1.000 Z0.000\nG1 X14.500 Y1.000 Z0.000\nG1 X14.500 Y1.500 Z0.000\nG1 X0.500 Y1.500 Z0.000\nG1 X0.500 Y2.000 Z0.000\nG1 X14.500 Y2.000 Z0.000\nG1 X14.500 Y2.500 Z0.000\nG1 X0.500 Y2.500 Z0.000\nG1 X0.500 Y3.000 Z0.000\nG1 X14.500 Y3.000 Z0.000\nG1 X14.500 Y3.500 Z0.000\nG1 X0.500 Y3.500 Z0.000\nG1 X0.500 Y4.000 Z0.000\nG1 X14.500 Y4.000 Z0.000\nG1 X14.500 Y4.500 Z0.000\nG1 X0.500 Y4.500 Z0.000\nG1 X0.500 Y5.000 Z0.000\nG1 X14.500 Y5.000 Z0.000\nG1 X14.500 Y5.500 Z0.000\nG1 X0.500 Y5.500 Z0.000\nG1 X0.500 Y6.000 Z0.000\nG1 X14.500 Y6.000 Z0.000\nG1 X14.500 Y6.500 Z0.000\nG1 X0.500 Y6.500 Z0.000\nG1 X0.500 Y7.000 Z0.000\nG1 X14.500 Y7.000 Z0.000\nG1 X14.500 Y7.500 Z0.000\nG1 X0.500 Y7.500 Z0.000\nG1 X0.500 Y8.000 Z0.000\nG1 X14.500 Y8.000 Z0.000\nG1 X14.500 Y8.500 Z0.000\nG1 X0.500 Y8.500 Z0.000\nG1 X0.500 Y9.000 Z0.000\nG1 X14.500 Y9.000 Z0.000\nG1 X14.500 Y9.500 Z0.000\nG1 X0.500 Y9.500 Z0.000\nG1 X0.500 Y10.000 Z0.000\nG1 X14.500 Y10.000 Z0.000\nG1 X14.500 Y10.500 Z0.000\nG1 X0.500 Y10.500 Z0.000\nG1 X0.500 Y11.000 Z0.000\nG1 X14.500 Y11.000 Z0.000\nG1 X14.500 Y11.500 Z0.000\nG1 X0.500 Y11.500 Z0.000\nG1 X0.500 Y12.000 Z0.000\nG1 X14.500 Y12.000 Z0.000\nG1 X14.500 Y12.500 Z0.000\nG1 X0.500 Y12.500 Z0.000\nG1 X0.500 Y13.000 Z0.000\nG1 X14.500 Y13.000 Z0.000\nG1 X14.500 Y13.500 Z0.000\nG1 X0.500 Y13.500 Z0.000\nG1 X0.500 Y14.000 Z0.000\nG1 X14.500 Y14.000 Z0.000\nG1 X14.500 Y14.500 Z0.000\nG1 X0.500 Y14.500 Z0.000\nM55",F3:"G0 X14.500 Y14.500 Z0.000\nG4 P3500\nM54\nG1 X14.500 Y0.500 Z0.000\nG1 X14.000 Y0.500 Z0.000\nG1 X14.000 Y14.500 Z0.000\nG1 X13.500 Y14.500 Z0.000\nG1 X13.500 Y0.500 Z0.000\nG1 X13.000 Y0.500 Z0.000\nG1 X13.000 Y14.500 Z0.000\nG1 X12.500 Y14.500 Z0.000\nG1 X12.500 Y0.500 Z0.000\nG1 X12.000 Y0.500 Z0.000\nG1 X12.000 Y14.500 Z0.000\nG1 X11.500 Y14.500 Z0.000\nG1 X11.500 Y0.500 Z0.000\nG1 X11.000 Y0.500 Z0.000\nG1 X11.000 Y14.500 Z0.000\nG1 X10.500 Y14.500 Z0.000\nG1 X10.500 Y0.500 Z0.000\nG1 X10.000 Y0.500 Z0.000\nG1 X10.000 Y14.500 Z0.000\nG1 X9.500 Y14.500 Z0.000\nG1 X9.500 Y0.500 Z0.000\nG1 X9.000 Y0.500 Z0.000\nG1 X9.000 Y14.500 Z0.000\nG1 X8.500 Y14.500 Z0.000\nG1 X8.500 Y0.500 Z0.000\nG1 X8.000 Y0.500 Z0.000\nG1 X8.000 Y14.500 Z0.000\nG1 X7.500 Y14.500 Z0.000\nG1 X7.500 Y0.500 Z.0000\nG1 X7.000 Y0.500 Z0.000\nG1 X7.000 Y14.500 Z0.000\nG1 X6.500 Y14.500 Z0.000\nG1 X6.500 Y0.500 Z0.000\nG1 X6.000 Y0.500 Z0.000\nG1 X6.000 Y14.500 Z0.000\nG1 X5.500 Y14.500 Z0.000\nG1 X5.500 Y0.500 Z0.000\nG1 X5.000 Y0.500 Z0.000\nG1 X5.000 Y14.500 Z0.000\nG1 X4.500 Y14.500 Z0.000\nG1 X4.500 Y0.500 Z0.000\nG1 X4.000 Y0.500 Z0.000\nG1 X4.000 Y14.500 Z0.000\nG1 X3.500 Y14.500 Z0.000\nG1 X3.500 Y0.500 Z0.000\nG1 X3.000 Y0.500 Z0.000\nG1 X3.000 Y14.500 Z0.000\nG1 X2.500 Y14.500 Z0.000\nG1 X2.500 Y0.500 Z0.000\nG1 X2.000 Y0.500 Z0.000\nG1 X2.000 Y14.500 Z0.000\nG1 X1.500 Y14.500 Z0.000\nG1 X1.500 Y0.500 Z0.000\nG1 X1.000 Y0.500 Z0.000\nG1 X1.000 Y14.500 Z0.000\nG1 X0.500 Y14.500 Z0.000\nG1 X0.500 Y0.500 Z0.000\nM55",F4:"G0 X0.500 Y14.500 Z0.000\nG4 P3500\nM54\nG1 X14.500 Y14.500 Z0.000\nG1 X14.500 Y14.000 Z0.000\nG1 X0.500 Y14.000 Z0.000\nG1 X0.500 Y13.500 Z0.000\nG1 X14.500 Y13.500 Z0.000\nG1 X14.500 Y13.000 Z0.000\nG1 X0.500 Y13.000 Z0.000\nG1 X0.500 Y12.500 Z0.000\nG1 X14.500 Y12.500 Z0.000\nG1 X14.500 Y12.000 Z0.000\nG1 X0.500 Y12.000 Z0.000\nG1 X0.500 Y11.500 Z0.000\nG1 X14.500 Y11.500 Z0.000\nG1 X14.500 Y11.000 Z0.000\nG1 X0.500 Y11.000 Z0.000\nG1 X0.500 Y10.500 Z0.000\nG1 X14.500 Y10.500 Z0.000\nG1 X14.500 Y10.000 Z0.000\nG1 X0.500 Y10.000 Z0.000\nG1 X0.500 Y9.500 Z0.000\nG1 X14.500 Y9.500 Z0.000\nG1 X14.500 Y9.000 Z0.000\nG1 X0.500 Y9.000 Z0.000\nG1 X0.500 Y8.500 Z0.000\nG1 X14.500 Y8.500 Z0.000\nG1 X14.500 Y8.000 Z0.000\nG1 X0.500 Y8.000 Z0.000\nG1 X0.500 Y7.500 Z0.000\nG1 X14.500 Y7.500 Z0.000\nG1 X14.500 Y7.000 Z0.000\nG1 X0.500 Y7.000 Z0.000\nG1 X0.500 Y6.500 Z0.000\nG1 X14.500 Y6.500 Z0.000\nG1 X14.500 Y6.000 Z0.000\nG1 X0.500 Y6.000 Z0.000\nG1 X0.500 Y5.500 Z0.000\nG1 X14.500 Y5.500 Z0.000\nG1 X14.500 Y5.000 Z0.000\nG1 X0.500 Y5.000 Z0.000\nG1 X0.500 Y4.500 Z0.000\nG1 X14.500 Y4.500 Z0.000\nG1 X14.500 Y4.000 Z0.000\nG1 X0.500 Y4.000 Z0.000\nG1 X0.500 Y3.500 Z0.000\nG1 X14.500 Y3.500 Z0.000\nG1 X14.500 Y3.000 Z0.000\nG1 X0.500 Y3.000 Z0.000\nG1 X0.500 Y2.500 Z0.000\nG1 X14.500 Y2.500 Z0.000\nG1 X14.500 Y2.000 Z0.000\nG1 X0.500 Y2.000 Z0.000\nG1 X0.500 Y1.500 Z0.000\nG1 X14.500 Y1.500 Z0.000\nG1 X14.500 Y1.000 Z0.000\nG1 X0.500 Y1.000 Z0.000\nG1 X0.500 Y0.500 Z0.000\nG1 X14.500 Y0.500 Z0.000\nM55",feeder1:{on:"M60",off:"M70"},feeder2:{on:"M61",off:"M71"},feeder3:{on:"M62",off:"M72"},gas:{powder:{on:"M40",off:"M41"},coaxial:{on:"M50",off:"M51"},shield:{on:"M52",off:"M53"}},laser:{on:"M54",off:"M55"},end:"M30"};function Ut(){const e=(0,Bt.Kh)({C1:jt.C1,C2:jt.C2,C3:jt.C3,C4:jt.C4,F1:jt.F1,F2:jt.F2,F3:jt.F3,F4:jt.F4}),t=(0,Bt.KR)(null),n=(0,Bt.Kh)({}),o=(0,Bt.KR)(["C1","C2","C3","C4","F1","F2","F3","F4"]),l=(0,Bt.Kh)({}),s=["C1","C2","C3","C4","F1","F2","F3","F4"],a=(e,t)=>{n[e]||(n[e]=[]),n[e].push(t),o.value.push(t)},c=(a,c)=>{const i=c.filter(e=>!s.includes(e));if(0===i.length)throw new Error("기본 버튼(C1-C4, F1-F4)은 삭제할 수 없습니다.");return n[a]&&(n[a]=n[a].filter(e=>!i.includes(e))),i.forEach(e=>{const t=o.value.indexOf(e);t>-1&&o.value.splice(t,1)}),i.forEach(t=>{delete e[t],delete l[t]}),i.includes(t.value)&&(t.value=null),i},i=(n,o)=>{t.value=n,o(e[n]||"")},r=(t,n)=>{if(!n.trim())throw new Error("저장할 코드가 없습니다.");if(!t)throw new Error("먼저 버튼을 선택해주세요.");e[t]=n},d=(e,t)=>{if(!e)throw new Error("먼저 버튼을 선택해주세요.");if(!t)throw new Error("이미지 파일이 없습니다.");return new Promise((n,o)=>{const s=new FileReader;s.onload=t=>{l[e]=t.target.result,n(t.target.result)},s.onerror=()=>o(new Error("이미지 로드 실패")),s.readAsDataURL(t)})},u=()=>{Object.assign(e,{C1:jt.C1,C2:jt.C2,C3:jt.C3,C4:jt.C4,F1:jt.F1,F2:jt.F2,F3:jt.F3,F4:jt.F4});const t=localStorage.getItem("buttonCodes");if(t){const n=JSON.parse(t);Object.keys(n).forEach(t=>{["C1","C2","C3","C4","F1","F2","F3","F4"].includes(t)||(e[t]=n[t])})}const s=localStorage.getItem("customButtonLists");if(s){const e=JSON.parse(s);Object.assign(n,e),n["테스트1"]&&delete n["테스트1"],n["C"]&&n["C"].includes("C2")&&(n["C"]=n["C"].filter(e=>"C2"!==e))}const a=localStorage.getItem("buttonImages");if(a){const e=JSON.parse(a);Object.assign(l,e)}o.value=["C1","C2","C3","C4","F1","F2","F3","F4"],Object.values(n).forEach(e=>{o.value=o.value.concat(e)})},m=()=>{localStorage.setItem("buttonCodes",JSON.stringify(e)),localStorage.setItem("customButtonLists",JSON.stringify(n)),localStorage.setItem("buttonImages",JSON.stringify(l))};return{buttonCodes:e,selectedButton:t,customButtonLists:n,allButtons:o,buttonImages:l,defaultButtons:s,addButton:a,deleteButtons:c,selectButton:i,saveCode:r,saveButtonImage:d,loadButtonData:u,saveButtonData:m}}function Jt(){const e={1:{on:"M60",off:"M70"},2:{on:"M61",off:"M71"},3:{on:"M62",off:"M72"}},t=(e,t,o)=>{const{layerThickness:l,dwellTime:s,target:a,selectedFeeder:c,selectedCycle:i,scanSpeed:r}=e;console.log("피더 선택:",c);const d=n(l,s,a,c,i,r,t);return o(d),d},n=(t,n,a,i,r,d,u)=>{console.log("generateCodeContent 호출됨:",{layerThickness:t,dwellTime:n,target:a,feeder:i,cycle:r,scanSpeed:d});const m=Math.ceil(a/t);let g=[];g=r.selectedItems&&r.selectedItems.length>0?r.selectedItems.map(e=>u[e.name]||`; ${e.name} - No code assigned`):[u["C1"]||"; C1 - No code assigned"];const v=parseInt(i)||1,C=e[v]||e[1];console.log("피더 매개변수:",i),console.log("피더 타입:",typeof i),console.log("선택된 피더 코드:",C);let p="";p+=o(C,n,d);for(let e=1;e<=m;e++){const o=((e-1)*t).toFixed(3);p+=l(e,o),p+=c(g,r.selectedItems,o,n,u,t,C)}return p+=s(C,n),p.trim()},o=(e,t,n)=>{let o="";return o+="; === 프로그램 헤더 ===\n",o+="G90\n",o+="M50\n",o+=`F${n}\n`,o+="G54\n",o+="M40\n",o+=`${e.on}\n`,o+=`G4 P${t}\n`,o+="\n",o},l=(e,t)=>{let n="";return n+=`; === Layer ${e} (Z = ${t}) ===\n`,n},s=(e,t)=>{let n="";return n+="; === 프로그램 푸터 ===\n",n+=`${e.off}\n`,n+="M41\n",n+="M51\n",n+="M53\n",n+="G0 X0.0 Y0.0\n",n+=`G4 P${t}\n`,n+="M90\n",n+="G53\n",n+="M30\n",n},a=(e,t)=>{let n="";return n+="; 레이어 변경 블록\n",n+="M51\n",n+=`${e.off}\n`,n+="M41\n",n+=`G4 P${t}\n`,n+="M50\n",n+="M40\n",n+=`${e.on}\n`,n},c=(e,t,n,o,l,s,c)=>{let i="";const r=[];let d=[];t.forEach(e=>{"/"===e.name?d.length>0&&(r.push(d),d=[]):d.push(e)}),d.length>0&&r.push(d),0===r.length&&r.push(t.filter(e=>"/"!==e.name));const u=Math.floor(parseFloat(n)/s)+1,m=(u-1)%r.length,g=r[m]||r[0]||[];if(console.log(`레이어 ${u} (Z=${n}), 선택된 그룹 ${m}:`,g),g.length>0){const e=g[0],t=l[e.name]||`; ${e.name} - No code assigned`,s=t.split("\n");let r=!1,d="";for(const l of s)if(!r&&l.trim().startsWith("G0")){let t=l.replace(/Z[0-9]*\.?[0-9]+/g,`Z${n}`).replace(/G4 P[0-9]+/g,`G4 P${o}`);i+=`; ${e.name}\n`,i+=t+"\n",r=!0,u>1&&(i+=a(c,o),i+="; 나머지 동작 코드\n"),d=s.slice(s.indexOf(l)+1).join("\n");break}if(r){if(d.trim()){let e=d.replace(/Z[0-9]*\.?[0-9]+/g,`Z${n}`).replace(/G4 P[0-9]+/g,`G4 P${o}`);i+=e+"\n"}}else{i+=`; ${e.name}\n`;let l=t.replace(/Z[0-9]*\.?[0-9]+/g,`Z${n}`).replace(/G4 P[0-9]+/g,`G4 P${o}`);i+=l+"\n"}for(let a=1;a<g.length;a++){const e=g[a],t=l[e.name]||`; ${e.name} - No code assigned`;i+=`; ${e.name}\n`;let s=t.replace(/Z[0-9]*\.?[0-9]+/g,`Z${n}`).replace(/G4 P[0-9]+/g,`G4 P${o}`);i+=s+"\n\n"}}return i};return{generate3DPrintingCode:t,generateCodeContent:n}}var Rt={name:"App",components:{MainDashboard:we,CycleManagement:He,PrintingCodeGenerator:kt,RightPanel:Mt},setup(){const{currentPage:e,selectedItems:t,menuItems:n,loadAppState:o}=Et(),{sidebarOpen:l,toggleSidebar:s}=Pt(),{textAreaContent:a,rightPanelTitle:c,textAreaPlaceholder:i,updateContent:r,updateTitle:d,clearContent:u,updateTextAreaForPage:m,showButtonCode:g}=Ot(),{savedCycles:v,isLoading:C,error:p,saveCycle:h,deleteCycle:y,showCycleContent:f,loadCycles:X,updateCycle:G,saveCyclesToStorage:k,loadCyclesFromStorage:b}=Tt(),{buttonCodes:Z,selectedButton:Y,customButtonLists:L,allButtons:w,buttonImages:I,addButton:S,deleteButtons:F,selectButton:x,saveCode:M,saveButtonImage:B,loadButtonData:E,saveButtonData:P}=Ut(),{generate3DPrintingCode:O}=Jt(),_=()=>{P(),k()},D=async()=>{try{await X(),E(),o(()=>{console.log("loadAppState 콜백 실행됨, selectedItems:",t.value),t.value.length>0?(console.log("selectedItems가 있음, updateNCCode 실행"),T()):console.log("selectedItems가 없음")})}catch(p){console.error("데이터 로드 실패:",p),b()}},$=n=>{console.log("switchPage 실행됨, pageNumber:",n);const o=e.value;console.log("이전 페이지:",o),e.value=n,1===n&&1!==o?(console.log("메인 대시보드로 돌아옴, 상태 유지"),m(n),t.value.length>0&&(console.log("selectedItems 복원됨, NC 코드 업데이트"),T())):(console.log("다른 페이지로 이동"),m(n))},A=e=>{console.log("addToBottomPanel 실행됨, itemName:",e);const n=Date.now(),o=`${e}_${n}`;t.value.push({id:o,name:e}),console.log("selectedItems 업데이트됨:",t.value),T(),localStorage.setItem("selectedItems",JSON.stringify(t.value)),console.log("localStorage에 selectedItems 저장됨")},N=e=>{const n=t.value.findIndex(t=>t.id===e);n>-1&&(t.value.splice(n,1),T(),localStorage.setItem("selectedItems",JSON.stringify(t.value)))},T=()=>{console.log("updateNCCode 실행됨, selectedItems:",t.value);let e="",n=1;t.value.forEach(t=>{console.log("처리 중인 아이템:",t),"/"===t.name?(""!==e&&(e+="\n\n"),e+=`// ===== 레이어 ${n} =====\n`,n++):Z[t.name]?(""!==e&&(e+="\n\n"),e+=`// ${t.name} 버튼 코드\n${Z[t.name]}`):console.log("버튼 코드를 찾을 수 없음:",t.name)}),console.log("생성된 NC 코드:",e),e?(console.log("updateContent 호출"),r(e)):(console.log("clearContent 호출"),u())},j=()=>{t.value=[],u(),localStorage.setItem("selectedItems",JSON.stringify(t.value))},U=async({selectedList:e,buttonName:t,buttonCode:n,buttonImage:o})=>{try{if(S(e,t),n&&n.trim()&&M(t,n),o)try{await B(t,o),console.log("이미지 저장됨:",o.name)}catch(p){console.error("이미지 저장 실패:",p),alert("이미지 저장에 실패했습니다.")}_()}catch(p){alert(p.message)}},J=({listType:e,buttons:t})=>{try{F(e,t),_(),alert("선택된 버튼들이 삭제되었습니다.")}catch(p){alert(p.message)}},R=e=>{x(e,r)},K=e=>{g(e,Z),T()},W=async()=>{try{if(!a.value||""===a.value.trim())return void alert("저장할 NC 코드가 없습니다. 먼저 버튼을 클릭하여 코드를 생성해주세요.");const n=prompt("사이클 이름을 입력하세요:",`Cycle_${v.value.length+1}`);if(!n||""===n.trim())return void alert("사이클 이름을 입력해주세요.");const o=await h(n,a.value,t.value);await X(!0),_(),e.value=3,setTimeout(()=>{alert(`사이클 "${n}"이 데이터베이스에 저장되었습니다!\n\n저장된 사이클 정보:\n- ID: ${o.id}\n- 이름: ${n}\n- 선택된 아이템: ${t.value.map(e=>e.name).join(", ")}\n- 저장 시간: ${(new Date).toLocaleString()}`)},100)}catch(p){alert(`사이클 저장 실패: ${p.message}`)}},V=()=>{try{M(Y.value,a.value),_(),alert("코드가 저장되었습니다.")}catch(p){alert(p.message)}},Q=e=>{f(e,r,d)},z=async e=>{try{const t=v.value[e];t&&t.id?(await y(t.id),await X(!0),_()):(y(e),_())}catch(p){alert(`사이클 삭제 실패: ${p.message}`)}},q=async(e,t)=>{try{await G(e,t),await X(!0),_()}catch(p){throw alert(`사이클 수정 실패: ${p.message}`),p}},H=async()=>{try{await X()}catch(p){console.error("사이클 로드 재시도 실패:",p)}},ee=e=>{try{O(e,Z,r),alert(`3D 프린팅 코드가 생성되었습니다. (선택된 피더: ${e.selectedFeeder})`)}catch(p){alert(p.message)}};return D(),{currentPage:e,selectedItems:t,savedCycles:v,isLoading:C,error:p,buttonCodes:Z,selectedButton:Y,customButtonLists:L,allButtons:w,buttonImages:I,sidebarOpen:l,menuItems:n,textAreaContent:a,rightPanelTitle:c,textAreaPlaceholder:i,toggleSidebar:s,switchPage:$,addToBottomPanel:A,removeFromBottomPanel:N,clearAllItems:j,updateContent:r,clearContent:u,handleAddButton:U,handleDeleteButtons:J,handleSelectButton:R,handleShowButtonCode:K,handleSaveCycle:W,handleSaveCode:V,handleShowCycle:Q,handleDeleteCycle:z,handleUpdateCycle:q,handleRetryLoad:H,handleGenerateCode:ee,loadAppState:o,saveData:_}}};const Kt=(0,Ye.A)(Rt,[["render",m],["__scopeId","data-v-6a84a815"]]);var Wt=Kt;(0,o.Ef)(Wt).mount("#app")},7240:function(e,t,n){"use strict";e.exports=n.p+"img/F2.13be2560.jpg"},7535:function(e,t,n){var o={"./C1.jpg":3120,"./C2.jpg":6111,"./C3.jpg":9730,"./C4.jpg":1425,"./F1.jpg":5911,"./F2.jpg":7240,"./F3.jpg":1205,"./F4.jpg":1966};function l(e){var t=s(e);return n(t)}function s(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}l.keys=function(){return Object.keys(o)},l.resolve=s,e.exports=l,l.id=7535},9730:function(e,t,n){"use strict";e.exports=n.p+"img/C3.ee5f3c1b.jpg"}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,o,l,s){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],l=e[d][1],s=e[d][2];for(var c=!0,i=0;i<o.length;i++)(!1&s||a>=s)&&Object.keys(n.O).every(function(e){return n.O[e](o[i])})?o.splice(i--,1):(c=!1,s<a&&(a=s));if(c){e.splice(d--,1);var r=l();void 0!==r&&(t=r)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,l,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,s,a=o[0],c=o[1],i=o[2],r=0;if(a.some(function(t){return 0!==e[t]})){for(l in c)n.o(c,l)&&(n.m[l]=c[l]);if(i)var d=i(n)}for(t&&t(o);r<a.length;r++)s=a[r],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(d)},o=self["webpackChunkscanpattern"]=self["webpackChunkscanpattern"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],function(){return n(6812)});o=n.O(o)})();
//# sourceMappingURL=app.dbf0946d.js.map